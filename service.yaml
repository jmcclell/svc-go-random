name: svc-go-random

config:
  http_port: 8000
  admin_port: 9000

containers:
- dockerfile: docker/Dockerfile
  context: .

profiles:
  stable:
    endpoint: /random/
    admin_endpoint: /random/admin/
    max_memory: 0.5G
    max_cpu: 0.5
  canary:
    endpoint: /random/
    admin_endpoint: /random/admin/
    weight: 10
    max_memory: 0.25G
    max_cpu: 0.25
  default:
    name: {{branch.replace('/', '-')}}
    endpoint: /preview/random/{{branch}}/
    admin_endpoint: /preview/random/{{branch}}/admin/
    max_memory: 0.25G
    max_cpu: 0.25
